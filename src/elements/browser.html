<link rel="import" href="http://localhost:8082/src/js/lib/vendor/polymer/polymer.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/iron-input/iron-input.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/iron-pages/iron-pages.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/iron-icon/iron-icon.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/iron-icons/iron-icons.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/iron-list/iron-list.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/iron-ajax/iron-ajax.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/app-layout/app-layout.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/paper-tabs/paper-tabs.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/paper-fab/paper-fab.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/paper-input/paper-input.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/paper-button/paper-button.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/paper-styles/typography.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/paper-toast/paper-toast.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/paper-dialog/paper-dialog.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/neon-animation/animations/scale-up-animation.html">
<link rel="import" href="http://localhost:8082/src/js/lib/vendor/neon-animation/animations/scale-down-animation.html">

<script src="http://localhost:8082/src/js/lib/vendor/jquery/dist/jquery.min.js"></script>
<script src="http://localhost:8082/src/js/lib/vendor/yjs/y.js"></script>

<script src="http://localhost:8082/src/js/lib/openapp.js"></script>
<script src="http://localhost:8082/src/js/lib/iwc.js"></script>
<script src="http://localhost:8082/src/js/lib/extendedLas2peerWidgetLibrary.js"></script>
<script src="http://localhost:8082/src/js/lib/yjs-sync.js"></script>

<script src="http://localhost:8082/src/js/conf.js"></script>
<script src="http://localhost:8082/src/js/util.js"></script>
<script src="http://localhost:8082/src/js/lang.js"></script>
<script src="http://localhost:8082/src/js/story.js"></script>
<script src="http://localhost:8082/src/js/browser.js"></script>

<link rel="stylesheet" type="text/css" href="http://localhost:8082/src/js/lib/x3dom/x3dom.css"></link>
<link rel="import" href="http://localhost:8082/src/css/defaults.html">

<style is="custom-style" include="iron-flex"></style>

<dom-module id="story-browser">
    <template>

        <style include="shared-styles"></style>
        <style>
         #elem {
             border: none;
         }
         
         iron-list {
             height: 90%;
             --iron-list-items-container: {
                 max-width: 800px;
                 margin: auto;
                 margin-bottom: 5px;
                 border-bottom: 1px solid #ddd;
             };
         }
         .item {
             @apply(--layout-horizontal);
             padding: 20px;
             background-color: white;
             border: 1px solid #ddd;
             cursor: pointer;
             margin-bottom: 10px;
         }
         .shortText, .longText {
             font-size: 14px;
         }
         .longText {
             color: gray;
             display: none;
         }
         .item:hover .shortText::after {
             content: ' [+]';
             color: gray;
         }
         .item.expanded:hover .shortText::after {
             content: '';
         }
         .item.expanded .longText {
             display: block;
         }

         paper-fab {
             position: fixed;
             right: 30px;
             bottom: 16px;
         }
        </style>
        <paper-tabs class="l1 flex" id="tabs" selected={{mode}}>
            <paper-tab>STORIES</paper-tab>
            <paper-tab>MODELS</paper-tab>
        </paper-tabs>
        <div class="l2">
            <iron-pages selected={{mode}}>
                <div>        
                    <iron-ajax url="http://localhost:8082/assets/stories.json" last-response="{{data}}" auto></iron-ajax>
                    <iron-list id="list" items="[[data]]" as="item" selection-enabled multi-selection>
                        <template>
                            <div class$="[[getClassForItem(item, selected)]]" tabindex$="[[tabIndex]]">
                                <div class="pad">
                                    <div class="primary">[[item.name]]</div>
                                    <div class="shortText">by [[item.author]]</div>
                                    <div class="longText">[[item.description]]</div>
                                </div>
                            </div>
                        </template>
                    </iron-list>
                    <paper-fab mini icon="add"></paper-fab>
                </div>
                <div>
                </div>
            </iron-pages>
        </div>
    </template>
</dom-module>

<script>
 Polymer({
     is: 'story-browser',
     
     properties: {
         mode: {
             type: Number,
             value: 0,
             observer: '_modeChanged'
         }
     },

     ready: function() {
         $("#list").scrollTarget = this.ownerDocument.documentElement;
     },
     
     iconForItem: function(item) {
         return item ? (item.integer < 50 ? 'star-border' : 'star') : '';
     },

     getClassForItem: function(item, selected) {
         return selected ? 'item expanded' : 'item';
     },
     
     _modeChanged: function(index) {

     }
 });
</script>

